<style type="text/css">
    table {
        width: 100%;
        font-family: helvetica;
        line-height: 5mm;
        border-collapse: collapse;
    }

    .table th {
        background-color: gray;
    }

    .table td, .table th {
        border: 1px solid black;
        height: 25px;
    }

    .p-10 { width: 10%; }
    .p-15{width: 15%}
    .p-20{width: 20%;}
    .p-30 {width: 30%;}
    .p-40 {width: 40%;}
    .p-60 { width: 60%; }
    .p-70{width: 70%}
    .p-100{width: 100%;}

    .report th, .report td{
        border: 1px solid black;
        height: 20px;
        font-size: 15px;
    }
    .text-center {
        text-align: center;
    }
    .text-right {
        text-align: right;
    }
    img {
        height:80px;
    }
    
    .text-left {
        text-align: left;
    }
    .bottom {
        margin-left:50px;
    }

    .bottom-right {
        margin-left:25px;
    }
    .total {
        font-size:20px;
    }
</style>

<page footer="page">
    <page_footer>
        <hr />
        <span>{{agency.abreviation}}</span> <span class="bottom">Generated By <b>
                {% if currentUser %}
                    {% set array = currentUser|split(' ') %}
                    {{ attribute(array, 0) }}
                    {% if array| length >= 2 %}
                        {{ attribute(array, 1) }}
                    {% endif %}
                {% endif %}
            </b></span><span class="bottom-right"><b>HYMIF</b> made by GreenSoft-Group Technologies</span>
    </page_footer>
    <table>
        <tr>
            <td class="p-60">
                 <b>{{agency.name}}</b> <br/>
                 <b>HEAD OFFICE {{agency.town}}</b> <br/>
                 <b>TEL: {{agency.phoneNumber}}</b><br>
                 <b>PO BOX: {{agency.poBox}}</b>
            </td>
            <td  class="p-40 text-right">
                <img src="./assets/images/users/logo_cu1.jpg"  alt="logo">
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td class="p-100">
                <h3 class="text-center"><strong>INDIVIDUAL LEDGER BALANCE</strong></h3>
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td class="p-70">Period: <b>{{ start_date |date('d/m/Y') }} - {{ end_date |date('d/m/Y') }} </b></td>
            <td class="p-30">Generate on: <strong>{{ date |date('d/m/Y H:i:s') }}</strong></td>
        </tr>
    </table><br>
    <table>
        <tr>
            <td class="p-70">Account Name: <strong>{{account.accountName |upper}}</strong></td>
            <td class="p-30 text-left">Account Number: <strong>{{account.accountNumber}}</strong></td>
        </tr>
    </table><br>
        {% if operations %}
            <table class="table">
                <tr>
                    <th class="p-10 text-center">Date</th>
                    <th class="p-40 text-center">Description</th>
                    <th class="p-15 text-center">Debit</th>
                    <th class="p-15 text-center">Credit</th>
                    <th class="p-20 text-center">Balance</th>
                </tr>
                {% set totalBalance = 0 %}
                {% for operation in operations %}
                    <tr>
                        <td class="text-center">{{operation.dateOperation|date('d-m-Y')}}</td>
                        <td class="text-center">{{operation.accountTitle}}</td>
                        <td class="text-center">
                            {% if operation.debit != 0  %}
                                {{operation.debit |number_format(0, '.', ' ')}}
                                {% set totalBalance = totalBalance + operation.debit %}
                            {% else %}
                                //
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {% if operation.credit != 0 %}
                                {{ operation.credit |number_format(0, '.', ' ') }}
                                {% set totalBalance = totalBalance - operation.credit %}
                            {% else %}
                                //
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {{ operation.accountBalance |number_format(0, '.', ' ') }}
                        </td>
                    </tr>
                {% endfor %}
                <tr><td class="text-center total" colspan="4"><b>Total</b></td><td class="text-center total"><b>{{ totalBalance|number_format(0, '.', ' ') }}</b></td></tr>
            </table>
        {% else %}
            <table class="table">
                <tr>
                    <th class="p-10 text-center">Date</th>
                    <th class="p-40 text-center">Description</th>
                    <th class="p-15 text-center">Debit</th>
                    <th class="p-15 text-center">Credit</th>
                    <th class="p-20 text-center">Balance</th>
                </tr>
                <tr><td class="p-100 text-center" colspan="5"><h3 style="color: red;">NO OPERATION AVAILABLE</h3></td></tr>
            </table>
        {% endif %}
</page>