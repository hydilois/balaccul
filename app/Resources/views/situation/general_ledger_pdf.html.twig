<page footer="page">
    <page_footer>
        <hr />
        <span>{{agency.abreviation}}</span> <span style="margin-left:150px;">Printed By <b>{{currentUser}}</b></span><span style="margin-left:100px;">GreenSoft-Team</span>
    </page_footer>
    <table>
        <tr>
            <td class="60p">
                 <b>{{agency.name}}</b> <br/>
                 <b>HEAD OFFICE {{agency.abreviation}}</b> <br/>
                 <b>TEL: {{agency.phoneNumber}}</b><br>
                 <b>PO BOX: {{agency.poBox}}</b>
            </td>
            <td  style="text-align: right;" class="40p">
                <img style="height:80px;" src="./assets/images/users/logo_cu1.jpg"  alt="logo">
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td class="100p">
                <h3 style="text-align:center"><u><strong>GENERAL LEDGER BALANCE</strong></u></h3>
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td class="50p">Generate on: <strong>{{date |date('d-m-Y H:m:s')}}</strong></td>
            {% if lastOperation %}
                <td style="text-align:right" class="50p">GLB End date: <strong>{{lastOperation.dateOperation |date('d-m-Y')}}</strong></td>
            {% else %}
                <td style="text-align:right" class="50p">GLB End date: <strong>{{endDate |date('d-m-Y')}}</strong></td>
            {% endif %}
        </tr>
    </table><br>
        {% if operations %}
    <table class="eleves">
        <tr>
            <th style="text-align:center; background: gray" class="10p">DATE</th>
            <th style="text-align:center; background: gray" class="50p">DESCRIPTION</th>
            <th style="text-align:center; background: gray" class="10p">DEBIT</th>
            <th style="text-align:center; background: gray" class="10p">CREDIT</th>
            <th style="text-align:center; background: gray" class="20p">BALANCE</th>
        </tr>
        <tr>
        {% if lastOperation %}
            <td style="text-align:center; font-size:20px" colspan="4"><b>BALANCE B/F ({{lastOperation.dateOperation |date('d-m-Y')}})</b></td>
        {% else %}
            <td style="text-align:center; font-size:20px" colspan="4"><b>BALANCE B/F ({{dayBefore |date('d-m-Y')}})</b></td>
        {% endif %}

            <td style="text-align:center; font-size:20px"><b>{{balanceBF |number_format(0, '.', ' ')}}</b></td>
        </tr>
        {% for operation in operations %} 
            <tr>
                <td style="text-align:center">{{operation.dateOperation|date('d-m-Y')}}</td>
                <td style="text-align:center; font-size:11px">{{operation.accountTitle}} //
                                            {% if operation.representative %}
                                                {% set array = operation.representative|split(' ') %}
                                                {{ attribute(array, 0) }} 
                                                {% if array| length >= 2 %}
                                                    {{ attribute(array, 1) }}
                                                {% endif %}
                                            {% endif %}
                                            </td>
                <td style="text-align:center">{% if operation.debit != 0  %}
                                                    {{operation.debit |number_format(0, '.', ' ')}}
                                                {% else %}
                                                    //
                                                {% endif %}
                </td>
                <td style="text-align:center">{% if operation.credit != 0 %}
                                                    {{operation.credit |number_format(0, '.', ' ')}}
                                                {% else %}
                                                    //
                                                {% endif %}
                </td>
                <td style="text-align: center">
                    {% if operation.debit != 0 %}
                                {{operation.balance |number_format(0, '.', ' ')}}
                    {% endif %}
                    {% if operation.credit != 0 %}
                                {% if operation.balance < 0 %}
                                    {{operation.balance |abs |number_format(0, '.', ' ')}}
                                    {% else %}
                                        {{operation.balance |number_format(0, '.', ' ')}}
                                {% endif %}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
     </table>
        {% elseif balanceBF != 0 %}
            <table class="eleves">
                <tr>
                    <th style="text-align:center; background: gray" class="10p">DATE</th>
                    <th style="text-align:center; background: gray" class="50p">DESCRIPTION</th>
                    <th style="text-align:center; background: gray" class="10p">DEBIT</th>
                    <th style="text-align:center; background: gray" class="10p">CREDIT</th>
                    <th style="text-align:center; background: gray" class="20p">BALANCE</th>
                </tr>
                <tr>
                    <td style="text-align:center; font-size:20px" colspan="4"><b>BALANCE B/F ({{lastOperation.dateOperation |date('d-m-Y')}})</b></td>
                    <td style="text-align:center; font-size:20px"><b>{{balanceBF |number_format(0, '.', ' ')}}</b></td>
                </tr>
                <tr>
                    <td style="text-align:center; font-size:20px; color:red" colspan="5"><b>NO OPERATIONS FOR THE DAY</b></td>
                </tr>
             </table>
        {% else %}
             <table class="eleves">
                            <tr>
                                <th style="text-align:center; background: gray" class="10p">DATE</th>
                                <th style="text-align:center; background: gray" class="50p">DESCRIPTION</th>
                                <th style="text-align:center; background: gray" class="10p">DEBIT</th>
                                <th style="text-align:center; background: gray" class="10p">CREDIT</th>
                                <th style="text-align:center; background: gray" class="20p">BALANCE</th>
                            </tr>
                            <tr>
                                <td style="text-align:center; font-size:20px;color:red" colspan="5"><b>NO RESULTS</b></td>
                            </tr>
                         </table>
        {% endif %}
</page>

{% include '/report/extra_file_report.css.html.twig' %}