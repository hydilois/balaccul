<style type="text/css">
    table {
        width: 100%;
        line-height: 5mm;
        border-collapse: collapse;
    }

    .p-10 { width: 10%;}
    .p-20 {width: 20%;}
    .p-40 {width: 40%;}
    .p-50 { width: 50%; }
    .p-60 { width: 60%; }
    .p-100{width: 100%;}


    .statistics td,.statistics th {
        border: 1px solid black;
        height: 25px;
    }

    .statistics th {
        background: gray;
    }
    .text-center {
        text-align: center;
    }
    
    .text-right {
        text-align: right;
    }
</style>

<page footer="page">
    <page_footer>
        <hr />
        <span>{{agency.abreviation}}</span> <span style="margin-left:50px;">Generated By <b>{{currentUser}}</b></span><span style="margin-left:100px;">GreenSoft-Group Technologies</span>
    </page_footer>
    <table>
        <tr>
            <td class="p-60">
                 <b>{{agency.name}}</b> <br/>
                 <b>HEAD OFFICE {{agency.town}}</b> <br/>
                 <b>TEL: {{agency.phoneNumber}}</b><br>
                 <b>PO BOX: {{agency.poBox}}</b>
            </td>
            <td class="p-40 text-right">
                <img style="height:80px;" src="./assets/images/users/logo_cu1.jpg"  alt="logo">
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td class="p-100 text-center">
                <h3><u><strong>GENERAL LEDGER BALANCE</strong></u></h3>
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td class="p-50">Generate on: <strong>{{date |date('d-m-Y H:i')}}</strong></td>
            {% if lastOperation %}
                <td class="p-50 text-right">GLB End date: <strong>{{lastOperation.dateOperation |date('d-m-Y')}}</strong></td>
            {% else %}
                <td class="p-50 text-right">GLB End date: <strong>{{endDate |date('d-m-Y')}}</strong></td>
            {% endif %}
        </tr>
    </table><br>
        {% if operations %}
    <table class="statistics">
        <tr>
            <th class="p-10 text-center">DATE</th>
            <th class="p-50 text-center">DESCRIPTION</th>
            <th class="p-10 text-center">DEBIT</th>
            <th class="p-10 text-center">CREDIT</th>
            <th class="p-20 text-center">BALANCE</th>
        </tr>
        <tr>
        {% if lastOperation %}
            <td class="text-center" style="font-size:20px" colspan="4"><b>BALANCE B/F ({{lastOperation.dateOperation |date('d-m-Y')}})</b></td>
        {% else %}
            <td class="text-center" style="font-size:20px" colspan="4"><b>BALANCE B/F ({{dayBefore |date('d-m-Y')}})</b></td>
        {% endif %}

            <td class="text-center" style="font-size:20px"><b>{{balanceBF |number_format(0, '.', ' ')}}</b></td>
        </tr>
        {% for operation in operations %} 
            <tr>
                <td class="text-center">{{operation.dateOperation|date('d-m-Y')}}</td>
                <td style="text-align:center; font-size:11px">{{operation.accountTitle}} //
                                            {% if operation.representative %}
                                                {% set array = operation.representative|upper|split(' ') %}
                                                {{ attribute(array, 0) }} 
                                                {% if array| length >= 2 %}
                                                    {{ attribute(array, 1) }}
                                                {% endif %}
                                            {% endif %}
                                            </td>
                <td class="text-center">{% if operation.debit != 0  %}
                                                    {{operation.debit |number_format(0, '.', ' ')}}
                                                {% else %}
                                                    //
                                                {% endif %}
                </td>
                <td class="text-center">{% if operation.credit != 0 %}
                                                    {{operation.credit |number_format(0, '.', ' ')}}
                                                {% else %}
                                                    //
                                                {% endif %}
                </td>
                <td class="text-center">
                    {% if operation.debit != 0 %}
                                {{operation.balance |number_format(0, '.', ' ')}}
                    {% endif %}
                    {% if operation.credit != 0 %}
                        {{operation.balance |number_format(0, '.', ' ')}}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
     </table>
        {% elseif balanceBF != 0 %}
            <table class="statistics">
                <tr>
                    <th class="text-center p-10">DATE</th>
                    <th class="text-center p-50">DESCRIPTION</th>
                    <th class="text-center p-10">DEBIT</th>
                    <th class="text-center p-10">CREDIT</th>
                    <th class="text-center p-20">BALANCE</th>
                </tr>
                <tr>
                    <td class="text-center" style="font-size:20px" colspan="4"><b>BALANCE B/F ({{lastOperation.dateOperation |date('d-m-Y')}})</b></td>
                    <td class="text-center" style="font-size:20px"><b>{{balanceBF |number_format(0, '.', ' ')}}</b></td>
                </tr>
                <tr>
                    <td class="text-center" style="font-size:20px; color:red" colspan="5"><b>NO OPERATIONS FOR THE DAY</b></td>
                </tr>
             </table>
        {% else %}
             <table class="statistics">
                <tr>
                    <th class="text-center p-10">DATE</th>
                    <th class="text-center p-50">DESCRIPTION</th>
                    <th class="text-center p-10">DEBIT</th>
                    <th class="text-center p-10">CREDIT</th>
                    <th class="text-center p-20">BALANCE</th>
                </tr>
                <tr>
                    <td class="text-center" style="font-size:20px;color:red" colspan="5"><b>NO RESULTS</b></td>
                </tr>
             </table>
        {% endif %}
</page>