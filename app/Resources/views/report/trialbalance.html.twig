{% extends 'base.html.twig' %}
{% block title %}{{parent()}} Trial balance{% endblock %}
{% block contenu %}
        <div class="row">
        <div class="col-sm-12">
            <div class="card-box table-responsive">
            <h2 class="m-t-0 header-title text-center">BALATCHI COOPERATIVE CREDIT UNION LTD</h2>
            <h3 class="m-t-0 header-title text-center">Trial Balance</h3>

            <h4 class="m-t-0 header-title text-center">From <strong> <b>{{ displayDateStart }}</b> to <b>{{displayDateEnd}}</b></h4>
            <div class="row">
                <div class="col-md-6">Generated by: <b>{{currentUser}}</b></div>
                <div class="col-md-4">Generated On: <strong>{{date |date('d-m-Y')}}</strong></div>
                <div class="col-md-2">XAF: FCFA </div>
            </div><br>

                <a target="_blank" href="{{path('trialbalance_pdf_file',{ date1:displayDateStart, date2:displayDateEnd })}}" class="btn btn-default">Générer PDF</a> <br><br>
        <table class="table table-striped table-condensed">
        	<thead>
        		<tr>
        			<th>Account Number</th>
        			<th>Name</th>
        			<th>DEBIT</th>
                    <th>CREDIT</th>
        			<th>Balance</th>
        		</tr>
        	</thead>
        	<tbody>
                {% set totalIncome = 0 %}
                {% set totalExpenditure = 0 %}
                {% for classe in classes %}
                        {% for account in classe.listeAccounts %} 
                            <tr>
                                <td>{{account.accountNumber }}</td>
                                <td>{{account.name}}</td>
                                <td>{% if account.type =="DEBIT"  %}
                                        {{account.amount}}
                                    {% set totalExpenditure = totalExpenditure + account.amount %}
                                    {% else %}
                                        0
                                    {% set totalExpenditure = totalExpenditure + 0 %}
                                    {% endif %}
                                </td>
                                <td>{% if account.type =="CREDIT"  %}
                                        {{account.amount}}
                                    {% set totalIncome = totalIncome + account.amount %}
                                    {% else %}
                                        0
                                    {% set totalIncome = totalIncome + 0 %}
                                    {% endif %}
                                </td>
                                <td></td>
                            </tr>
                        {% endfor %}
        		{% endfor %}
        	</tbody>
            <tr>
            	<td colspan="2">
            		TOTAL
            	</td>
                <td style="border-rigth:none;">{{totalExpenditure }}</td>
                <td>{{ totalIncome }}</td>
				<td style="border-left:none;"> {% set balance = totalIncome - totalExpenditure %} {{balance}} </td>
            </tr>
        </table>
        </div>
        </div>
    </div>
{% endblock %}