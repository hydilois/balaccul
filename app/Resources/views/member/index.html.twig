{% extends 'base.html.twig' %}
{% block title %}{{parent()}} members list{% endblock %}
{% block contenu %}
     <ol class="breadcrumb">
    <li>
      <a href="#">BALACCUL</a>
    </li>
    <li>
      <a href="#">Physical Members</a>
    </li>
    <li class="active">
      Consulter
    </li>
  </ol>
    <div class="row">
        <div class="col-sm-12">
            <div class="card-box table-responsive"><a href="{{path('member_new')}}" class="btn btn-default pull-left">Add a new member</a><br>
            <h4 class="m-t-0 header-title text-center"><b>Members list {{members |length}}</b></h4>
            <table id="datatable-buttons" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th style="width: 100px;">Actions</th>
                        <th>Number</th>
                        <th>Name</th>
                        <th>SHARES</th>
                        <th>REGISTRATION</th>
                        <th>SAVINGS</th>
                        <th>DEPOSIT</th>
                        <th>BUILDING FEES</th>
                    </tr>
                </thead>
                {% set shares = 0 %}
                {% set registration = 0 %}
                {% set saving = 0 %}
                {% set deposit = 0 %}
                {% set buildingfees = 0 %}
                {% for member in members %}
                    <tr>
                        <td>
                            <div class="input-group-btn">
                              <button type="button" class="btn btn-primary btn-flat dropdown-toggle" data-toggle="dropdown" aria-expanded="true">Actions
                                <span class="fa fa-caret-down"></span></button>
                              <ul class="dropdown-menu fadeInDown animated">
                                <li>
                                    <a name="show-member" data-member="{{member.m_id}}" href="{{path('member_show', {id:member.m_id})}}"><i class="fa fa-eye"></i> Show</a>
                                </li>
                                <li><a href="{{ path('member_edit', { 'id': member.m_id }) }}"><i class="fa fa-edit"></i> Edit</a></li>
                                <li><a target="_blank" href="{{ path('member_registration_receipt', { 'id': member.m_id }) }}"><i class="fa fa-file-pdf-o"></i> Receipt</a></li>
                              </ul>
                            </div>
                    </td>
                    <td>{{ member.m_memberNumber }}</td>
                    <td>{{ member.m_name }}</td>
                    <td>{{ member.sh_solde }}</td>
                    <td>{{ member.m_registrationFees }}</td>
                    <td>{{ member.sa_solde }}</td>
                    <td>{{ member.de_solde }}</td>
                    <td>{{ member.m_buildingFees }}</td>
                </tr>
                {% set shares = shares + member.sh_solde %}
                {% set registration = registration + member.m_registrationFees %}
                {% set saving = saving + member.sa_solde %}
                {% set deposit = deposit + member.de_solde %}
                {% set buildingfees = buildingfees + member.m_buildingFees %}
        {% endfor %}
        </tbody>
    </table>
    <table class="table table-striped table-bordered">
        <tr style="font-size:30px; text-align:center">
            <td colspan="3">TOTALS</td>
            <td>SHA: <b>{{shares}}</b></td>
            <td>REG: <b>{{registration}}</b></td>
            <td>SAV: <b>{{saving}}</b></td>
            <td>DEP: <b>{{deposit}}</b></td>
            <td>BFE: <b>{{buildingfees}}</b></td>
        </tr>
    </table>
</div>
</div>
</div>
        
    {% include './member/extras.css.html.twig' %}
    {% include './member/extras.js.html.twig' %}
{% endblock %}